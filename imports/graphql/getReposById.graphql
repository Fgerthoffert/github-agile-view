query ($repository_array: [ID!]!){
  rateLimit {
    limit
    cost
    remaining
    resetAt
  }
  nodes(ids:$repository_array) {
    ... on Repository {
      id
      name
      url
      updatedAt
      createdAt
      pushedAt
      collaborators(first: 10, affiliation: OUTSIDE) {
        totalCount
        edges {
          permission
          node {
            id
            login
            name
          }
        }
      }
      refs(first: 1, refPrefix: "refs/heads/", orderBy: {field: TAG_COMMIT_DATE, direction: DESC}) {
        totalCount
        edges {
          node {
            target {
              ... on Commit {
                id
                pushedDate
                author {
                  date
                  email
                  user {
                    name
                    login
                    id
                  }
                }                    
              }
            }
          }
        }
      }            
      repositoryTopics(first: 10) {
        totalCount
        edges{
          node{
            id
            topic{
              id
              name                    
            }
            url
          }
        }
      }
      branchProtectionRules(first: 5) {
        totalCount
        edges{
          node{
            id
            databaseId
            isAdminEnforced
            pattern
            requiredApprovingReviewCount
            requiredStatusCheckContexts                  
            requiresApprovingReviews
            requiresCodeOwnerReviews
            requiresCommitSignatures
            requiresStatusChecks
            requiresStrictStatusChecks
            restrictsPushes
            restrictsReviewDismissals                  
          }
        }
      }
      databaseId
      diskUsage
      forkCount
      isPrivate
      isArchived
      isFork
      openGraphImageUrl
      owner{
        id
        login
        url              
      }
      languages(first: 10) {
        totalCount
        edges {
          node {
            color
            id
            name
          }
        }              
      }
      issues(first: 1, orderBy: {field: UPDATED_AT, direction: DESC}) {
        totalCount
        edges {
          node {
            id
            updatedAt
          }
        }
      }
      labels(first: 1) {
        totalCount
      }
      milestones(first: 1) {
        totalCount
      }
      pullRequests(first: 1) {
        totalCount
        edges {
          node {
            id
            updatedAt
          }
        }              
      }
      releases(first: 1) {
        totalCount
      }
      projects(first: 1) {
        totalCount
      }
    }
  }
}